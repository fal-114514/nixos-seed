# NixOS 構成解説 (フラット構成)

このプロジェクトは、初心者でも理解しやすいようにシンプルでフラットな構造を採用しています。

## 1. ディレクトリ構造

```plaintext
.
├── flake.nix           # システムのエントリーポイント
├── variables.nix       # ユーザー固有の設定変数
├── configuration.nix   # システム全体の設定
├── home.nix            # ユーザー（Home Manager）の設定
├── hardware-configuration.nix # ハードウェア自動生成設定
└── DE/                 # デスクトップ環境別の詳細設定
```

## 2. 設計思想

### 2.1 変数の一元管理 (`variables.nix`)

ユーザー名、ホスト名、デスクトップ環境の有効・無効などの「変更頻度の高い項目」を `variables.nix` に集約しています。これにより、コードの深い部分を触ることなく基本的なカスタマイズが可能です。

### 2.2 依存注入

`flake.nix` において、`variables.nix` の内容を `var` という名前で各モジュールに渡しています。これにより、`configuration.nix` や `home.nix` 内で `var.user.name` のように直感的に設定を参照できます。

## 3. カスタマイズ

- **パッケージの追加**: `home.nix` の `home.packages` セクションに追加します。
- **システムサービスの有効化**: `configuration.nix` で設定を行います。
- **デスクトップ環境の設定**: `DE/` 配下の各ディレクトリにあるファイルで管理されています。
